<?xml version="1.0" encoding="utf-8"?>
<s:Module xmlns:fx="http://ns.adobe.com/mxml/2009" 
		  xmlns:s="library://ns.adobe.com/flex/spark" 
		  xmlns:mx="library://ns.adobe.com/flex/mx" width="1000" creationComplete="module1_creationCompleteHandler(event)">
	<fx:Style>
		@namespace s "library://ns.adobe.com/flex/spark";
		@namespace mx "library://ns.adobe.com/flex/mx";
		@namespace flexpad "com.flexpad.*";
		global
		{
			/*	chromeColor: #474747;
			color: #D6D6D6;
			contentBackgroundColor: #000000;
			symbolColor: #000000;*/
			rollOverColor: #FFFFFF;
			selectionColor: #FFFFFF;
			focusColor: #037EA7;
			accentColor: #037EA7;
			
			/*fontFamily : "Droid";*/
			fontFamily : "Malgun Gothic","Dotum","Gulim",AppleGothic,sans-serif;
			fontSize : 12px;
		}
		
		s|Scroller {
			skinClass : ClassReference("skin.scroller.ThinScrooller");
		}
		
	</fx:Style>
	<fx:Script>
		<![CDATA[
			import mx.collections.ArrayCollection;
			import mx.events.FlexEvent;
			
			import spark.events.IndexChangeEvent;

			[Bindable]
			private var ac:ArrayCollection = null;
			
			[Bindable]
			private var acTemplet:ArrayCollection = null;
			
			/* arrayCollection to json
			first decode  the loaded json string: 
			var data:*  =JSON.decode(myJSON); 
			var myArrayCollection:ArrayCollection = new ArrayCollection 
				(data.stuffs);
			
			import com.adobe.serializers.json.JSONDecoder;
			var j:JSONDecoder= new JSONDecoder();   
			var obj:Object= j.decode(json string);
			myarray= obj as ArrayCollection;
			*/
			
			protected function module1_creationCompleteHandler(event:FlexEvent):void
			{
				// default {type:0, value:{}}
				ac = new ArrayCollection([
											[{type:2, value:{layout:"one",next:0,btnText:"확인",commitMsg:"감사용"}},{type:1,value:{layout:"tile", imgs:[{url:"/images/ic_launcher_smsmms.png",link:""},{url:"/images/ic_launcher_smsmms.png",link:""}]}},{type:0,value:{text:"<p style=\"text-align:left\">안녕하세요!!!</p><p style=\"text-align:left\"><b>박사준</b>입니다.</p>"}}],
											[{type:1,value:{layout:"tile", imgs:[{url:"/images/icon_text_event.gif",link:""},{url:"/images/icon_text_event.gif",link:""},{url:"/images/icon_text_event.gif",link:""},{url:"/images/icon_text_event.gif",link:""},{url:"/images/icon_text_event.gif",link:""}]}}],
											[{type:1,value:{layout:"tile", imgs:[{url:"/images/icon_text_event.gif",link:""},{url:"/images/icon_text_event.gif",link:""},{url:"/images/icon_text_event.gif",link:""},{url:"/images/icon_text_event.gif",link:""},{url:"/images/icon_text_event.gif",link:""}]}}]
										 ]);
				
				acTemplet = new ArrayCollection([
					{icon:"/images/ic_launcher_smsmms.png", label:"[빈페이지]\n내용 없는 빈페이지"},
					{icon:"/images/ic_launcher_smsmms.png", label:"[홍보]\n이미지와 텍스트"},
					{icon:"/images/ic_launcher_smsmms.png", label:"[이벤트&쿠폰]\n이벤트 응모 및\n바코드 쿠폰"},
					{icon:"/images/ic_launcher_smsmms.png", label:"[마일리지]\n마일리지 적립\n및 사용"},
					{icon:"/images/ic_launcher_smsmms.png", label:"[상품홍보]\n여러 상품 이미지\n및 설명"}
				]);
			}
			
			protected function templets_changeHandler(event:IndexChangeEvent):void
			{
				var idx:int = event.newIndex;
				ac.addItem( getPageData(idx) );
			}
			
			private function getPageData(idx:int):Array {
				
				var rslt:Array = null;
				switch(idx)
				{
					case 0:{rslt = [{type:1,value:{layout:"tile", imgs:[{url:"/images/ic_launcher_smsmms.png",link:""},{url:"/images/ic_launcher_smsmms.png",link:""}]}}];break;}
					case 1:{rslt = [{type:0,value:{text:"dddd" }}];break;}
					default:
					{
						rslt = [{type:1,value:{layout:"tile", imgs:[{url:"/images/ic_launcher_smsmms.png",link:""},{url:"/images/ic_launcher_smsmms.png",link:""}]}}];
						break;
					}
				}
				callLater(deSelectTemplete);
				return rslt;
			}
			private function deSelectTemplete():void {
				templets.selectedIndex = -1;
			}
			
		]]>
	</fx:Script>
	<fx:Declarations>
		<!-- Place non-visual elements (e.g., services, value objects) here -->
	</fx:Declarations>
	
	<s:BitmapImage left="0" right="0" top="0" bottom="0"
				   source="@Embed('/skin/ics/assets/widget_dark.png', scaleGridTop='10', scaleGridBottom='320', scaleGridLeft='10', scaleGridRight='314')"
				   fillMode="scale" alpha="1"/>
	
	<s:VGroup left="7.2" right="7.2" top="10" bottom="8.08" horizontalAlign="center" gap="0">
		<s:Group width="100%">
			<s:Label text="모바일웹에디터" left="15" verticalCenter="-2" fontSize="16" fontWeight="bold" color="#FFFFFF" />
			<s:Image id="close" right="10" verticalCenter="-2" source="/skin/ics/assets/dark/icon/1-navigation-cancel.png" buttonMode="true" />	
		</s:Group>
		<s:Rect width="100%" top="10" left="8" right="8"><s:stroke><s:SolidColorStroke color="#33B5E5" weight="2" /></s:stroke></s:Rect>
		<s:HGroup width="100%" height="610" gap="0">
			<s:Group width="20%" height="100%">
				<s:Rect width="100%" height="100%"><s:fill><s:SolidColor color="#999999" /></s:fill></s:Rect>
				<s:Group left="0" right="0" top="5" height="30">
					<s:Rect width="100%" height="100%"><s:fill><s:SolidColor color="#333333" /></s:fill></s:Rect>
					<s:Label text="페이지 추가" left="15" verticalCenter="0" color="#FFFFFF" />
				</s:Group>
				<s:List id="templets" width="100%" top="35" dataProvider="{acTemplet}" borderVisible="false" contentBackgroundAlpha="0" itemRenderer="module.url.TempletsRenderer"
						change="templets_changeHandler(event)">
				</s:List>
			</s:Group>
			<s:List id="mobileWebPages" width="80%" dataProvider="{ac}" borderVisible="false" contentBackgroundAlpha="0" itemRenderer="module.url.MobileWebPagesRenderer">
				<s:layout><s:HorizontalLayout horizontalAlign="center" paddingLeft="10" paddingRight="10" paddingTop="20" paddingBottom="10" gap="5" /></s:layout>
			</s:List>
		</s:HGroup>
	</s:VGroup>
	
	<s:HGroup left="525" bottom="20">
		<s:Button label="미리 보기" right="5" skinClass="module.url.component.skin.ButtonGray" color="#FFFFFF" />
		<s:Button label="제작 완료" right="5" skinClass="module.url.component.skin.ButtonBlue" color="#FFFFFF"/>
	</s:HGroup>
	
</s:Module>
