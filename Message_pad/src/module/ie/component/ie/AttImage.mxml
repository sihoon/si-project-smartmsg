<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009" 
		 xmlns:s="library://ns.adobe.com/flex/spark" 
		 xmlns:mx="library://ns.adobe.com/flex/mx"
		 implements="module.ie.component.ie.IAtt"
		 currentState="normal"
		 xmlns:ie="module.ie.component.ie.*"
		 creationComplete="created(event)"
		 click="disPatchAction()">
	<fx:Metadata>
		[Event(name="action",type="flash.events.Event")]
		[Event(name="remove",type="flash.events.Event")]
	</fx:Metadata>
	<fx:Script>
		<![CDATA[
			import module.ie.util.ResizeManager;
			
			import mx.events.FlexEvent;
			
			import spark.components.SkinnableContainer;
			
			
			[Bindable]
			public var resizeManager:ResizeManager;
			[Bindable]
			public var source:Object;
			
			/**
			 * IAtt method
			 * */
			public function hideFunction():void {
				this.currentState = "hideFun";
			}
			public function disPatchAction():void {
				this.currentState = "normal";
				this.setFocus();
				dispatchEvent(new Event("action"));
			}
			public function remove():void {
				dispatchEvent(new Event("remove"));
			}
			
			private function created(event:FlexEvent):void {
				if (this.minWidth == 0) {
					this.minWidth = minWidth;
				}
				if (this.minHeight == 0) {
					this.minHeight = minHeight;
				}
				resizeManager = new ResizeManager(this, resizeHandle);
					
				disPatchAction();
				
			}
			
			protected function moveComponent_mouseDownHandler(event:MouseEvent):void {
				this.startDrag(false, new Rectangle(0,0,owner.width-this.width,owner.height-this.height));
			}
			
			protected function moveComponent_mouseUpHandler(event:MouseEvent):void { this.stopDrag();}
			
			protected function delComponent_clickHandler(event:MouseEvent):void {
				
				SkinnableContainer(owner).removeElement( this );
			}

		]]>
	</fx:Script>
	<fx:Declarations>
		<!-- Place non-visual elements (e.g., services, value objects) here -->
	</fx:Declarations>
	<s:states>
		<s:State name="normal" />
		<s:State name="hideFun" />
	</s:states>
	<s:Image id="img" scaleMode="stretch" source="{source}" width="100%" height="100%" />
	<ie:PositionImage id="moveComponent" includeIn="normal" toolTip="move"
					  mouseDown="moveComponent_mouseDownHandler(event)" mouseUp="moveComponent_mouseUpHandler(event)" mouseOut="moveComponent_mouseUpHandler(event)"
					  left="0" top="0" width="16" height="16" lefts="0" tops="-80" source="module/ie/assets/ui-icons_222222_256x240.png" buttonMode="true" useHandCursor="true" />
	<ie:PositionImage id="delComponent" includeIn="normal"  toolTip="delete" 
					  click="remove()"
					  right="0" top="0" width="16" height="16" lefts="-32" tops="-192" source="module/ie/assets/ui-icons_222222_256x240.png" buttonMode="true" useHandCursor="true" />
	
	<ie:ResizeHandleLines id="resizeHandle" includeIn="normal"
						  enabled="{resizeManager.enabled}"
						  bottom="1"
						  right="1"
						  visible="{resizeManager.enabled}"/>
</s:Group>
