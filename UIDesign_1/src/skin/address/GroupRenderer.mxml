<?xml version="1.0" encoding="utf-8"?>
<s:ItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009" 
				xmlns:s="library://ns.adobe.com/flex/spark" 
				xmlns:mx="library://ns.adobe.com/flex/mx" 
				autoDrawBackground="true" 
				creationComplete="itemrenderer1_creationCompleteHandler(event)"
				>
	<fx:Script>
		<![CDATA[
			import mx.events.FlexEvent;
			import spark.components.supportClasses.ListBase;
			import valueObjects.AddressVO;
			
			protected function itemrenderer1_creationCompleteHandler(event:FlexEvent):void
			{
				if (data.idx == 0 && data.grpName != "모두")
					onEdit(null);
			}
			
			private function onChange(event:Event):void 
			{
				var oldValue:String = labelDisplay.text;
				var list:ListBase = this.owner as ListBase;
				if (data.idx == 0 && data.grpName != "모두" && inputTxt.text == "") {
					list.dataProvider.removeItemAt( this.itemIndex );
					return;
				}
				
				if (oldValue != inputTxt.text)
				{
					data.grpName = inputTxt.text;
					labelDisplay.text = inputTxt.text;
					//dispatch the data update event
					list.dataProvider.itemUpdated(data, "grpName", oldValue, inputTxt.text); 
				}
				isEdit(false);
			}
			
			private function onEdit(event:Event):void 
			{
				inputTxt.text = data.grpName;
				isEdit(true);
				//set cursor postion to end
				inputTxt.selectRange(inputTxt.text.length,inputTxt.text.length+1);
				inputTxt.setFocus();
				
			}
			
			private function isEdit(value:Boolean):void 
			{
				labelDisplay.visible = !value;
				inputTxt.visible =  value;
			}

			
			protected function inputTxt_enterHandler(event:FlexEvent):void
			{
				inputTxt.dispatchEvent( new FocusEvent(FocusEvent.FOCUS_OUT));
			}
			
			
		]]>
	</fx:Script>
	
	<s:Label id="labelDisplay" 
			 text="{data.grpName}"
			 doubleClick="onEdit(event)"
			 top="7" bottom="5" left="5" right="3"/>
	<s:TextInput id="inputTxt" 
				 visible="false"
				 focusOut="onChange(event)"
				 enter="inputTxt_enterHandler(event)"
				 
				 top="1" bottom="1" left="1" right="0"/>
	
</s:ItemRenderer>
