<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009"
		 xmlns:s="library://ns.adobe.com/flex/spark"
		 xmlns:mx="library://ns.adobe.com/flex/mx"
		 width="260" height="350" creationComplete="init()">
	<fx:Metadata>
		[Event(name="setReservation", type="lib.CustomEvent")]
		[Event(name="cancelReservation", type="flash.events.Event")]
	</fx:Metadata>
	<fx:Script>
		<![CDATA[
			import lib.CustomEvent;
			import lib.SLibrary;
			
			import mx.events.FlexEvent;
			/*
			* 정보 변수
			*/
			private var _getReserveTime:String = new String();
			
			public function get getReserveTime():String
			{
				return this._getReserveTime;
			}
			
			/*
			* 초기화
			*/
			private function init():void
			{
				// Date 컴포넌트 한글 초기화
				this.dateChooser.dayNames = ["일", "월", "화", "수", "목", "금", "토"];
				this.dateChooser.monthNames = ["1월", "2월", "3월", "4월", "5월", "6월",
					"7월", "8월", "9월", "10월", "11월", "12월"];
				var date:Date = new Date();
				time.value = date.getHours();
				min.value = date.getMinutes();
				fullYear.text = df.format(date);
				
			}
			
			private function confirm():void
			{
				var date:Date = null;
				var result:String = null;
				
				if(!this.dateChooser.selectedDate)		date = new Date();
				else									date = new Date(this.dateChooser.selectedDate);
				
				result = date.fullYear + "-" 
					+ SLibrary.addTwoSizeNumer( (date.month+1) ) + "-" 
					+ SLibrary.addTwoSizeNumer( date.date ) + " " 
					+ SLibrary.addTwoSizeNumer( int(this.time.textDisplay.text) ) + ":" 
					+ SLibrary.addTwoSizeNumer( int(this.min.textDisplay.text) );
				this._getReserveTime = result;
				
				this.dispatchEvent(new CustomEvent("setReservation", result));
				this.visible=false;
			}
			
			private function numericFormat(value:Number):String
			{
				var numFormat:String = null;
				
				if(value.toString().length == 1)		numFormat = "0" + value;
				else									numFormat = String(value);
				
				return numFormat;
			}
			
			protected function image1_clickHandler(event:MouseEvent):void
			{
				this.visible = false;
				this.dispatchEvent(new Event("cancelReservation"));
			}
			
			protected function dateChooser_creationCompleteHandler(event:FlexEvent):void
			{
				var dateStart:Date = new Date();
				dateStart["month"] += 6;
				
				var dateEnd:Date = new Date();
				dateEnd["date"] -= 1;
				
				dateChooser.disabledRanges = [ {rangeStart: dateStart}, {rangeEnd: dateEnd} ];
				
				// Date 컴포넌트 한글 초기화
				dateChooser.dayNames = ["일", "월", "화", "수", "목", "금", "토"];
				dateChooser.monthNames = ["1월", "2월", "3월", "4월", "5월", "6월",
					"7월", "8월", "9월", "10월", "11월", "12월"];
				
			}
			
		]]>
	</fx:Script>
	
	<fx:Declarations>
		<mx:DateFormatter id="df" formatString="YYYY년 MM월 DD일"/>
	</fx:Declarations>
	
	<s:BitmapImage left="0" right="0" top="0" bottom="0"
		source="@Embed('/skin/ics/assets/widget_lite.png', scaleGridTop='10', scaleGridBottom='320', scaleGridLeft='10', scaleGridRight='314')"
		fillMode="scale" alpha="0.9"/>
	<s:Label top="15" left="15" text="예약설정" fontSize="16" />
	<s:Rect width="100%" top="40" left="8" right="8"><s:stroke><s:SolidColorStroke color="#33B5E5" weight="2" /></s:stroke></s:Rect>
	<s:Group top="50" left="15" bottom="0" right="10">
		<s:layout><s:VerticalLayout horizontalAlign="center"/></s:layout>
		<mx:DateChooser width="190" id="dateChooser"
						yearNavigationEnabled="true"
						fontFamily="Gulim"
						useHandCursor="true" buttonMode="true" headerColors="#000000"
						borderColor="#cccccc"
						creationComplete="dateChooser_creationCompleteHandler(event)"/>
		
		<s:VGroup width="181" horizontalAlign="center" gap="5" height="120">
			<s:Label id="fullYear" text="{df.format(dateChooser.selectedDate)}" fontWeight="bold"/>
			<s:HGroup verticalAlign="middle">
				<s:NumericStepper id="time" height="20" color="#000000"
								  contentBackgroundColor="#ffffff" fontSize="12" maximum="23"
								  valueFormatFunction="numericFormat"/><s:Label text="시"/>
				<s:NumericStepper id="min" height="20" color="#000000"
								  contentBackgroundColor="#ffffff" fontSize="12" maximum="59"
								  valueFormatFunction="numericFormat"/><s:Label text="분"/>
			</s:HGroup>
			<s:Label text="24시간제를 사용 합니다" color="#ed6c1f"/>
			<s:HGroup gap="10">
				<s:Button label="적용" click="confirm()" styleName="button_light" width="85" height="30" fontSize="12" />
				<s:Button label="취소" click="image1_clickHandler(event)"  styleName="button_light" width="85" height="30" fontSize="12" />
			</s:HGroup>
		</s:VGroup>
	</s:Group>
	<s:Image source="/skin/ics/assets/light/icon/1-navigation-cancel.png" id="close"  right="8" top="7" click="image1_clickHandler(event)" buttonMode="true"  />
	
</s:Group>
